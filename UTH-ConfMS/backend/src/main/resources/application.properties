spring.application.name=uth-confms-backend
server.port=${SERVER_PORT:8080}

# =========================
# Database (PostgreSQL)
# =========================
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5435/confms_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:123456}

spring.jpa.hibernate.ddl-auto=${SPRING_JPA_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# =========================
# Redis
# =========================
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:localhost}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}

# =========================
# Upload (Paper PDF / Camera-ready, v.v.)

# và SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE khi deploy.
# =========================
spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=100MB

# Upload directory for avatars and files
app.upload.dir=${UPLOAD_DIR:uploads}
app.base.url=${APP_BASE_URL:http://localhost:8080}

# =========================
# JWT (Backend tự phát hành access/refresh)
# =========================
app.jwt.secret=${JWT_SECRET:CHANGE_ME_DEV_ONLY_SECRET_KEY_AT_LEAST_32_CHARACTERS}
app.jwt.issuer=${JWT_ISSUER:uth-confms}
app.jwt.expiration-ms=${JWT_EXPIRATION_MS:3600000}
app.jwt.access-token-minutes=${JWT_ACCESS_MINUTES:60}
app.jwt.refresh-token-days=${JWT_REFRESH_DAYS:7}

# =========================
# Firebase Admin (verify Google/Firebase ID token)
# =========================
app.firebase.project-id=${FIREBASE_PROJECT_ID:uth-confms}
app.firebase.credentials=${FIREBASE_CREDENTIALS:./uth-confms-firebase-sa.json}

# Tự động tạo Firebase Authentication user khi đăng ký LOCAL
# - true: Tạo cả database user và Firebase user (sync 2 bên)
# - false: Chỉ tạo database user (Firebase chỉ dùng cho Google login)
# Khuyến nghị: false (vì Firebase có limit 50k users miễn phí)
app.auth.create-firebase-user=${CREATE_FIREBASE_USER:false}

# =========================
# CORS (React dev server)
# =========================
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173}

# Frontend URL để tạo reset link (log/email)
app.frontend.base-url=${FRONTEND_BASE_URL:http://localhost:5173}

# Thời hạn token reset (phút)
app.reset-password.token-ttl-minutes=${RESET_PASSWORD_TTL_MINUTES:30}

# SMTP Gmail
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=datpham100705@gmail.com
spring.mail.password=zsleucvqocwuze     
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# from mặc định (tùy chọn)
app.mail.from=UTH-ConfMS <datpham100705@gmail.com>

# =========================
# AI Service Configuration
# =========================
app.ai.service.url=${AI_SERVICE_URL:http://localhost:8001}
app.ai.service.timeout=30000
app.ai.service.retry.max-attempts=3
app.ai.service.cache.enabled=true