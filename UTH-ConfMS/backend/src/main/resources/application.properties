spring.application.name=uth-confms-backend
server.port=${SERVER_PORT:8080}

# =========================
# Database (PostgreSQL)
# =========================
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5435/confms_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:123456}

spring.jpa.hibernate.ddl-auto=${SPRING_JPA_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# =========================
# Redis
# =========================
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:localhost}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}

# =========================
# Upload (Paper PDF / Camera-ready, v.v.)

# và SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE khi deploy.
# =========================
spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=100MB

# Upload directory for avatars and files
app.upload.dir=${UPLOAD_DIR:../uploads}
app.base.url=${APP_BASE_URL:http://localhost:8080}

# =========================
# JWT (Backend tự phát hành access/refresh)
# =========================
app.jwt.secret=${JWT_SECRET:CHANGE_ME_DEV_ONLY_SECRET_KEY_AT_LEAST_32_CHARACTERS}
app.jwt.issuer=${JWT_ISSUER:uth-confms}
app.jwt.expiration-ms=${JWT_EXPIRATION_MS:3600000}
app.jwt.access-token-minutes=${JWT_ACCESS_MINUTES:60}
app.jwt.refresh-token-days=${JWT_REFRESH_DAYS:7}

# =========================
# Firebase Admin (verify Google/Firebase ID token)
# =========================
app.firebase.project-id=${FIREBASE_PROJECT_ID:uth-confms}
app.firebase.credentials=${FIREBASE_CREDENTIALS:./uth-confms-firebase-sa.json}

# Tự động tạo Firebase Authentication user khi đăng ký LOCAL
# - true: Tạo cả database user và Firebase user (sync 2 bên)
# - false: Chỉ tạo database user (Firebase chỉ dùng cho Google login)
# Khuyến nghị: true (để đồng bộ user data và hỗ trợ Firebase features)
# LƯU Ý: Firebase Free Tier giới hạn 50k users - nâng cấp Blaze Plan nếu cần
app.auth.create-firebase-user=${CREATE_FIREBASE_USER:true}

# =========================
# CORS (React dev server)
# =========================
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173}

# Frontend URL để tạo reset link (log/email)
app.frontend.base-url=${FRONTEND_BASE_URL:http://localhost:5173}

# Thời hạn token reset (phút) - sau khi OTP đã được xác thực
app.reset-password.token-ttl-minutes=${RESET_PASSWORD_TTL_MINUTES:15}

# Thời hạn OTP (phút) - mã OTP gửi qua email
app.reset-password.otp-ttl-minutes=${OTP_TTL_MINUTES:5}

# =========================
# SMTP Email Configuration (Để gửi OTP)
# =========================
# Hướng dẫn lấy App Password cho Gmail:
# 1. Truy cập: https://myaccount.google.com/apppasswords
# 2. Chọn "Mail" và "Other (Custom name)"
# 3. Nhập tên: "UTH-ConfMS Backend"
# 4. Copy mật khẩu 16 ký tự (không có khoảng trắng)
# 5. Dán vào MAIL_PASSWORD bên dưới

spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:datpham100705@gmail.com}
spring.mail.password=${MAIL_PASSWORD:gcgqwrjwwjaxzkou}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# Email người gửi (hiển thị trong email)
app.mail.from=${MAIL_FROM:UTH-ConfMS <datpham100705@gmail.com>}

# =========================
# AI Service Configuration (Gemini)
# =========================
# Key provided by user
app.ai.gemini.key=${GEMINI_API_KEY:dummy-key-for-dev}
app.ai.gemini.url=https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent
app.ai.service.timeout=30000
app.ai.service.retry.max-attempts=3
app.ai.service.cache.enabled=true